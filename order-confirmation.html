<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmation | Aadya</title>
    
    <!-- Google Fonts: Poppins & Lato -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <!-- Cart Functionality Script -->
    <script src="aadya-cart.js"></script>

    <style>
        :root {
            --primary-peach: #FFDAB9;
            --primary-pink: #F8C8DC;
            --accent-coral: #FF7F50;
            --text-charcoal: #2F2F2F;
            --neutral-white: #FFFFFF;
            --soft-gray: #F8F9FA;
            --font-heading: 'Poppins', sans-serif;
            --font-body: 'Lato', sans-serif;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            
            /* Dark Theme Colors */
            --dark-bg: #0F0D0E;
            --dark-surface: #1A1617;
            --dark-accent: #100C0D;
            --primary-pink-dark: #CC8B65;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.6;
            color: var(--text-charcoal);
            background-color: var(--neutral-white);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Dark Theme */
        [data-theme="dark"] {
            --neutral-white: var(--dark-bg);
            --text-charcoal: #E3DCD2;
            --soft-gray: var(--dark-surface);
        }

        /* Top Bar */
        .top-bar {
            background: linear-gradient(135deg, var(--primary-peach), var(--primary-pink));
            color: var(--text-charcoal);
            text-align: center;
            padding: 10px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Header */
        .header {
            background-color: var(--neutral-white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background-color 0.3s ease;
        }

        [data-theme="dark"] .header {
            background-color: var(--dark-surface);
            box-shadow: 0 4px 15px rgba(204, 139, 101, 0.2);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-family: var(--font-heading);
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-coral);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-charcoal);
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-links a:hover {
            color: var(--accent-coral);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--soft-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        [data-theme="dark"] .icon {
            background-color: var(--dark-accent);
            color: var(--primary-peach);
        }

        .icon:hover {
            background-color: var(--accent-coral);
            color: var(--neutral-white);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--accent-coral);
            color: var(--neutral-white);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-body);
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-coral), #FF6B47);
            color: var(--neutral-white);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 127, 80, 0.3);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--text-charcoal);
            border: 2px solid var(--accent-coral);
        }

        .btn-secondary:hover {
            background-color: var(--accent-coral);
            color: var(--neutral-white);
        }

        /* Main Content */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .confirmation-page {
            padding: 40px 0;
            min-height: 70vh;
        }

        /* Success Animation */
        .success-animation {
            text-align: center;
            margin-bottom: 40px;
        }

        .success-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #28a745, #20c997);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            animation: successPulse 2s ease-in-out infinite;
        }

        .success-icon i {
            font-size: 3rem;
            color: white;
        }

        @keyframes successPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 0 20px rgba(40, 167, 69, 0);
            }
        }

        .success-title {
            font-family: var(--font-heading);
            font-size: 2.5rem;
            color: #28a745;
            margin-bottom: 10px;
        }

        .success-subtitle {
            font-size: 1.2rem;
            color: var(--text-charcoal);
            margin-bottom: 30px;
        }

        [data-theme="dark"] .success-subtitle {
            color: var(--primary-peach);
        }

        /* Order Details */
        .order-details {
            background-color: var(--neutral-white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        [data-theme="dark"] .order-details {
            background-color: var(--dark-surface);
            box-shadow: 0 4px 15px rgba(204, 139, 101, 0.2);
        }

        .order-header {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        [data-theme="dark"] .order-header {
            border-bottom-color: rgba(204, 139, 101, 0.2);
        }

        .order-info {
            text-align: center;
        }

        .order-info-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        [data-theme="dark"] .order-info-label {
            color: var(--primary-peach);
            opacity: 0.8;
        }

        .order-info-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-charcoal);
        }

        [data-theme="dark"] .order-info-value {
            color: var(--primary-peach);
        }

        .section-title {
            font-family: var(--font-heading);
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--text-charcoal);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        [data-theme="dark"] .section-title {
            color: var(--primary-peach);
        }

        /* Order Items */
        .order-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        [data-theme="dark"] .order-item {
            border-bottom-color: rgba(204, 139, 101, 0.2);
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
        }

        .item-details {
            flex-grow: 1;
        }

        .item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .item-attributes {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        [data-theme="dark"] .item-attributes {
            color: var(--primary-peach);
            opacity: 0.8;
        }

        .item-quantity {
            font-size: 0.9rem;
            color: var(--accent-coral);
        }

        .item-price {
            font-weight: 700;
            color: var(--accent-coral);
            text-align: right;
        }

        /* Order Summary */
        .order-summary {
            background-color: var(--soft-gray);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        [data-theme="dark"] .order-summary {
            background-color: var(--dark-accent);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .summary-row.total {
            font-size: 1.2rem;
            font-weight: 700;
            padding-top: 15px;
            border-top: 2px solid var(--accent-coral);
            color: var(--accent-coral);
        }

        /* Delivery Information */
        .delivery-info {
            background-color: var(--neutral-white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        [data-theme="dark"] .delivery-info {
            background-color: var(--dark-surface);
            box-shadow: 0 4px 15px rgba(204, 139, 101, 0.2);
        }

        .delivery-timeline {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .timeline-step {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background-color: var(--soft-gray);
            position: relative;
        }

        [data-theme="dark"] .timeline-step {
            background-color: var(--dark-accent);
        }

        .timeline-step.active {
            background: linear-gradient(135deg, var(--accent-coral), #FF6B47);
            color: white;
        }

        .timeline-step-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .timeline-step-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .timeline-step-time {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        /* Support Section */
        .support-section {
            background-color: var(--soft-gray);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-top: 30px;
        }

        [data-theme="dark"] .support-section {
            background-color: var(--dark-surface);
        }

        .support-contacts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .support-contact {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            padding: 15px;
            background-color: var(--neutral-white);
            border-radius: 10px;
            transition: var(--transition);
        }

        [data-theme="dark"] .support-contact {
            background-color: var(--dark-accent);
        }

        .support-contact:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .support-contact i {
            color: var(--accent-coral);
            font-size: 1.2rem;
        }

        /* User Info Section Styles */
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 8px 12px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-right: 15px;
        }

        .user-phone {
            color: var(--neutral-white);
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-phone::before {
            content: '\f007';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            color: var(--accent-coral);
        }

        .logout-btn {
            background: linear-gradient(135deg, #ff4757, #ff3838);
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .logout-btn:hover {
            background: linear-gradient(135deg, #ff3838, #ff2f2f);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 71, 87, 0.4);
        }

        .logout-btn i {
            font-size: 11px;
        }

        [data-theme="dark"] .user-info {
            background-color: rgba(204, 139, 101, 0.1);
            border-color: rgba(204, 139, 101, 0.3);
        }

        [data-theme="dark"] .user-phone {
            color: var(--primary-peach);
        }

        /* Responsive adjustments for user info */
        @media (max-width: 768px) {
            .user-info {
                gap: 10px;
                padding: 6px 10px;
                margin-right: 10px;
            }
            
            .user-phone {
                font-size: 12px;
            }
            
            .logout-btn {
                padding: 5px 8px;
                font-size: 11px;
            }
        }

        @media (max-width: 480px) {
            .user-info {
                gap: 8px;
                padding: 5px 8px;
            }
            
            .user-phone {
                font-size: 11px;
            }
            
            .logout-btn {
                padding: 4px 6px;
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- TOP ANNOUNCEMENT BAR -->
    <div class="top-bar">
        Order Confirmed! Track your delivery status and get updates via SMS/Email
    </div>

    <!-- HEADER -->
    <header class="header">
        <div class="navbar">
            <a href="index.html" class="logo">Aadya</a>
            
            <ul class="nav-links">                <li><a href="index.html#home">Home</a></li>
                <li><a href="index.html#shop">Shop</a></li>
                <li><a href="index.html#offers">Offers</a></li>
                <li><a href="index.html#about">About Us</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul><div class="header-actions">
                <div class="icon theme-toggle" id="theme-toggle">
                    <i class="fa-solid fa-moon"></i>
                </div>
                
                <!-- User Info & Logout -->
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-phone" id="userPhone">+91 XXXXX XXXXX</div>
                    <button class="logout-btn" id="logoutBtn" onclick="logout()">
                        <i class="fa-solid fa-sign-out-alt"></i> Logout
                    </button>
                </div>
                
                <div class="icon" id="cart-icon">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
                
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="confirmation-page">
        <div class="container">
            <!-- Success Animation -->
            <div class="success-animation">
                <div class="success-icon">
                    <i class="fa-solid fa-check"></i>
                </div>
                <h1 class="success-title">Order Confirmed!</h1>
                <p class="success-subtitle">Thank you for your purchase. Your order has been successfully placed.</p>
            </div>

            <!-- Order Details -->
            <div class="order-details">
                <div class="order-header">
                    <div class="order-info">
                        <div class="order-info-label">Order Number</div>
                        <div class="order-info-value" id="order-number">Loading...</div>
                    </div>
                    <div class="order-info">
                        <div class="order-info-label">Order Date</div>
                        <div class="order-info-value" id="order-date">Loading...</div>
                    </div>
                    <div class="order-info">
                        <div class="order-info-label">Payment Method</div>
                        <div class="order-info-value" id="payment-method">Loading...</div>
                    </div>
                    <div class="order-info">
                        <div class="order-info-label">Total Amount</div>
                        <div class="order-info-value" id="total-amount">Loading...</div>
                    </div>
                </div>

                <!-- Order Items -->
                <h3 class="section-title">
                    <i class="fa-solid fa-shopping-bag"></i>
                    Order Items
                </h3>
                <div id="order-items">
                    <!-- Items will be populated by JavaScript -->
                </div>

                <!-- Order Summary -->
                <div class="order-summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="subtotal">‚Çπ0</span>
                    </div>
                    <div class="summary-row">
                        <span>Shipping:</span>
                        <span id="shipping">‚Çπ0</span>
                    </div>
                    <div class="summary-row" id="discount-row" style="display: none;">
                        <span>Discount:</span>
                        <span id="discount">-‚Çπ0.00</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span id="order-total">‚Çπ0</span>
                    </div>
                </div>
            </div>

            <!-- Delivery Information -->
            <div class="delivery-info">
                <h3 class="section-title">
                    <i class="fa-solid fa-truck"></i>
                    Delivery Information
                </h3>
                
                <div id="delivery-address">
                    <!-- Delivery address will be populated by JavaScript -->
                </div>

                <div class="delivery-timeline">
                    <div class="timeline-step active">
                        <div class="timeline-step-icon">
                            <i class="fa-solid fa-check-circle"></i>
                        </div>
                        <div class="timeline-step-title">Order Confirmed</div>
                        <div class="timeline-step-time">Today</div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-step-icon">
                            <i class="fa-solid fa-box"></i>
                        </div>
                        <div class="timeline-step-title">Processing</div>
                        <div class="timeline-step-time">1-2 days</div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-step-icon">
                            <i class="fa-solid fa-truck"></i>
                        </div>
                        <div class="timeline-step-title">Shipped</div>
                        <div class="timeline-step-time">2-3 days</div>
                    </div>
                    <div class="timeline-step">
                        <div class="timeline-step-icon">
                            <i class="fa-solid fa-home"></i>
                        </div>
                        <div class="timeline-step-title">Delivered</div>
                        <div class="timeline-step-time">3-5 days</div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <a href="index.html#shop" class="btn btn-primary">
                    <i class="fa-solid fa-shopping-bag" style="margin-right: 8px;"></i>
                    Continue Shopping
                </a>
                <button class="btn btn-secondary" onclick="downloadInvoice()">
                    <i class="fa-solid fa-download" style="margin-right: 8px;"></i>
                    Download Invoice
                </button>
                <button class="btn btn-secondary" onclick="trackOrder()">
                    <i class="fa-solid fa-map-marker-alt" style="margin-right: 8px;"></i>
                    Track Order
                </button>
            </div>

            <!-- Support Section -->
            <div class="support-section">
                <h3 class="section-title" style="justify-content: center;">
                    <i class="fa-solid fa-headset"></i>
                    Need Help?
                </h3>
                <p>If you have any questions about your order, feel free to contact us.</p>
                
                <div class="support-contacts">
                    <div class="support-contact">
                        <i class="fa-solid fa-phone"></i>
                        <span>Call: +91 98765 43210</span>
                    </div>
                    <div class="support-contact">
                        <i class="fa-solid fa-envelope"></i>
                        <span>Email: support@aadya.com</span>
                    </div>
                    <div class="support-contact">
                        <i class="fa-brands fa-whatsapp"></i>
                        <span>WhatsApp: +91 98765 43210</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="header" style="margin-top: 60px;">
        <div class="navbar" style="justify-content: center;">
            <p>&copy; 2025 Aadya Fashions. All Rights Reserved.</p>
        </div>
    </footer>    <script>
        // Initialize confirmation page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize theme
            initializeTheme();
            
            // Load order details
            loadOrderDetails();
            
            // Update cart count (should be 0 now)
            updateCartCount();
            
            // Setup theme toggle
            setupThemeToggle();
            
            // Setup cart icon click
            setupCartIcon();
        });

        function initializeTheme() {
            const savedTheme = localStorage.getItem('aadya_theme');
            const themeIcon = document.querySelector('#theme-toggle i');
            
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }
        }

        function setupThemeToggle() {
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.body.getAttribute('data-theme') || 'light';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                if (newTheme === 'dark') {
                    document.body.setAttribute('data-theme', 'dark');
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                } else {
                    document.body.removeAttribute('data-theme');
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                }
                
                localStorage.setItem('aadya_theme', newTheme);
            });
        }

        function setupCartIcon() {
            const cartIcon = document.getElementById('cart-icon');
            
            if (cartIcon) {
                cartIcon.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.location.href = 'cart.html';
                });
            }
        }

        function loadOrderDetails() {
            // Get order ID from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const orderId = urlParams.get('orderId');
            
            if (!orderId) {
                // Redirect to store if no order ID
                window.location.href = 'index.html';
                return;
            }
            
            // Get order details from localStorage
            const orders = JSON.parse(localStorage.getItem('aadya_orders') || '[]');
            const order = orders.find(o => o.orderId === orderId);
            
            if (!order) {
                // Redirect to store if order not found
                window.location.href = 'index.html';
                return;
            }
            
            // Populate order details
            document.getElementById('order-number').textContent = order.orderId;
            
            const orderDate = new Date(order.orderDate);
            document.getElementById('order-date').textContent = orderDate.toLocaleDateString('en-IN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Format payment method
            const paymentMethods = {
                'cod': 'Cash on Delivery',
                'upi': 'UPI Payment',
                'card': 'Credit/Debit Card',
                'netbanking': 'Net Banking'
            };
            document.getElementById('payment-method').textContent = paymentMethods[order.paymentMethod] || order.paymentMethod;
            
            document.getElementById('total-amount').textContent = order.total;
            document.getElementById('order-total').textContent = order.total;
            
            // Populate order items
            let orderItemsHtml = '';
            let subtotal = 0;
            
            order.items.forEach(item => {
                const itemPrice = parseFloat(item.price) || 0;
                const itemTotal = itemPrice * item.quantity;
                subtotal += itemTotal;
                
                orderItemsHtml += `
                    <div class="order-item">
                        <img src="${item.image}" alt="${item.name}" class="item-image">
                        <div class="item-details">
                            <div class="item-name">${item.name}</div>
                            <div class="item-attributes">
                                ${item.color ? `Color: ${item.color}` : ''} 
                                ${item.size ? `| Size: ${item.size}` : ''}
                            </div>
                            <div class="item-quantity">Quantity: ${item.quantity}</div>
                        </div>
                        <div class="item-price">‚Çπ${itemTotal.toFixed(2)}</div>
                    </div>
                `;
            });
            
            document.getElementById('order-items').innerHTML = orderItemsHtml;
            
            // Calculate and display summary
            const shipping = subtotal >= 999 ? 0 : 99;
            document.getElementById('subtotal').textContent = `‚Çπ${subtotal.toFixed(2)}`;
            document.getElementById('shipping').textContent = shipping === 0 ? 'Free' : `‚Çπ${shipping.toFixed(2)}`;
            
            // Display discount if applied
            const discountRow = document.getElementById('discount-row');
            const discountText = document.getElementById('discount');
            let discountAmount = 0;

            if (order.discountAmount && order.discountAmount !== "null") { // Check if discountAmount exists and is not "null" string
                const parsedDiscount = parseFloat(order.discountAmount.replace(/[^-0-9.]/g, ''));
                if (!isNaN(parsedDiscount)) {
                    discountAmount = Math.abs(parsedDiscount); // Ensure it's a positive value for calculation, display will handle sign
                    discountText.textContent = `-‚Çπ${discountAmount.toFixed(2)}`;
                    discountRow.style.display = 'flex';
                } else {
                     discountRow.style.display = 'none';
                }
            } else {
                discountRow.style.display = 'none';
            }
            
            const finalTotal = subtotal + shipping - discountAmount;
            document.getElementById('order-total').textContent = `‚Çπ${finalTotal.toFixed(2)}`;
            document.getElementById('total-amount').textContent = `‚Çπ${finalTotal.toFixed(2)}`; // Also update the top total amount

            // Populate delivery address
            const address = order.shippingAddress;
            const deliveryAddressHtml = `
                <p><strong>${order.customerInfo.firstName} ${order.customerInfo.lastName}</strong></p>
                <p>${address.address}</p>
                <p>${address.city}, ${address.state} - ${address.pincode}</p>
                ${address.landmark ? `<p>Landmark: ${address.landmark}</p>` : ''}
                <p>Phone: ${order.customerInfo.phone}</p>
                <p>Email: ${order.customerInfo.email}</p>
            `;
            document.getElementById('delivery-address').innerHTML = deliveryAddressHtml;
        }

        function downloadInvoice() {
            // Create invoice content
            const urlParams = new URLSearchParams(window.location.search);
            const orderId = urlParams.get('orderId');
            
            if (!orderId) {
                alert('Order ID not found!');
                return;
            }
            
            const orders = JSON.parse(localStorage.getItem('aadya_orders') || '[]');
            const order = orders.find(o => o.orderId === orderId);
            
            if (!order) {
                alert('Order details not found!');
                return;
            }
            
            // Create a simple text invoice (in a real app, you'd generate a PDF)
            let invoiceText = `
AADYA FASHIONS - INVOICE
========================

Order Number: ${order.orderId}
Order Date: ${new Date(order.orderDate).toLocaleDateString()}
Payment Method: ${order.paymentMethod.toUpperCase()}

BILLING INFORMATION:
${order.customerInfo.firstName} ${order.customerInfo.lastName}
Email: ${order.customerInfo.email}
Phone: ${order.customerInfo.phone}

SHIPPING ADDRESS:
${order.shippingAddress.address}
${order.shippingAddress.city}, ${order.shippingAddress.state} - ${order.shippingAddress.pincode}

ORDER ITEMS:
============
`;
            
            let subtotal = 0;
            order.items.forEach(item => {
                const itemPrice = parseFloat(item.price) || 0;
                const itemTotal = itemPrice * item.quantity;
                subtotal += itemTotal;
                
                invoiceText += `${item.name} x ${item.quantity} - ‚Çπ${itemTotal.toFixed(2)}\n`;
                if (item.color) invoiceText += `  Color: ${item.color}\n`;
                if (item.size) invoiceText += `  Size: ${item.size}\n`;
                invoiceText += '\n';
            });
            
            const shipping = subtotal >= 999 ? 0 : 99;
            const total = subtotal + shipping;
            
            invoiceText += `
SUMMARY:
========
Subtotal: ‚Çπ${subtotal.toFixed(2)}
Shipping: ${shipping === 0 ? 'Free' : '‚Çπ' + shipping}
Total: ‚Çπ${total.toFixed(2)}

Thank you for shopping with Aadya Fashions!
`;
            
            // Download as text file
            const blob = new Blob([invoiceText], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `aadya-invoice-${orderId}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function trackOrder() {
            const urlParams = new URLSearchParams(window.location.search);
            const orderId = urlParams.get('orderId');
            
            if (!orderId) {
                alert('Order ID not found!');
                return;
            }
            
            // In a real application, this would redirect to a tracking page
            // For demo purposes, we'll show an alert
            alert(`Track your order ${orderId}\n\nYour order is currently being processed.\nEstimated delivery: 3-5 business days\n\nYou will receive SMS and email updates as your order progresses.\n\nFor real-time tracking, contact our support team.`);
        }        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('aadya_cart') || '[]');
            const cartCount = cart.reduce((total, item) => total + item.quantity, 0);            document.getElementById('cartCount').textContent = cartCount;
        }

        // Secret admin access via keyboard shortcut (Ctrl+Shift+A)
        document.addEventListener('keydown', function(e) {
            // Check for Ctrl+Shift+A combination
            if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                e.preventDefault();
                
                const password = prompt('üîê Admin Access\nEnter password:');
                
                if (password === 'AadyaAdmin2025!') {
                    // Redirect to admin panel
                    window.location.href = 'add-kurti.html';
                } else if (password !== null) { // Only show error if they didn't cancel
                    alert('‚ùå Invalid password');
                }
            }
        });
    </script>
</body>
</html>
